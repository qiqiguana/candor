<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="Customizing">

  <typeAlias alias="CustomizingObject" type="ch.bfh.egov.nutzenportfolio.tos.Customizing"/>

  <resultMap id="customizingResult"			class="CustomizingObject">
	  <result property="customizingId"		column="customizingId"/>
	  <result property="mandantId" 				column="mandantId"/>
	  <result property="name"							column="name"/>
	  <result property="status"						column="status"/>
  </resultMap>

  <select
  		id="getById"
  		parameterClass="CustomizingObject"
  		resultMap="customizingResult">
    SELECT customizingId, mandantId, name, status
    FROM Customizing
    WHERE
    	customizingId = #customizingId# AND
    	mandantId = #mandantId#
  </select>
  
  <select
  		id="getByName"
  		parameterClass="CustomizingObject"
  		resultMap="customizingResult">
    SELECT customizingId, mandantId, name, status
    FROM Customizing
    WHERE
    	name = #name# AND
    	mandantId = #mandantId#
  </select>
  
  <select
  		id="getByPaUID"
  		parameterClass="java.lang.Long"
  		resultMap="customizingResult">
    SELECT c.customizingId, mandantId, name, status
    FROM Customizing AS c, Projektattraktivitaet AS p
    WHERE
    	c.customizingId = p.customizingId
    	AND paUID = #value#
  </select>
  
  <select
  		id="getByNaOpNuUID"
  		parameterClass="java.lang.Long"
  		resultMap="customizingResult">
    SELECT c.customizingId, mandantId, name, status
    FROM Customizing AS c, NutzenattraktivitaetOperativerNutzen AS n
    WHERE
    	c.customizingId = n.customizingId
    	AND naOpNuUID = #value#
  </select>
  
  <select
  		id="getAll"
  		parameterClass="java.lang.Integer"
  		resultMap="customizingResult">
    SELECT customizingId, mandantId, name, status
    FROM Customizing
    WHERE mandantId = #value#
    ORDER BY name
  </select>
  
  <insert id="insert" parameterClass="CustomizingObject">
    INSERT INTO Customizing (name, mandantId, status)
    VALUES (#name#, #mandantId#, #status#)
    <selectKey resultClass="java.lang.Integer" keyProperty="customizingId">
			SELECT LAST_INSERT_ID() AS customizingId
		</selectKey>
  </insert>

  <update id="update" parameterClass="CustomizingObject">
    UPDATE Customizing
    SET
      name = #name#,
      mandantId = #mandantId#,
      status = #status#
    WHERE
    	customizingId = #customizingId# AND
    	mandantId = #mandantId#
  </update>
  
  <delete id="delete" parameterClass="CustomizingObject">
    DELETE
    FROM Customizing
    WHERE
    	customizingId = #customizingId# AND
    	mandantId = #mandantId#
  </delete>
</sqlMap>
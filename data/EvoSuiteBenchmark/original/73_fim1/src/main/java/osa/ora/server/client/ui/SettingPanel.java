/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * SettingPanel.java
 *
 * Created on Nov 17, 2009, 11:56:55 PM
 */

package osa.ora.server.client.ui;

import javax.swing.JDialog;
import javax.swing.JOptionPane;
import osa.ora.server.client.ChatClientApp;

/**
 *
 * @author ooransa
 */
public class SettingPanel extends javax.swing.JPanel {
    ChatClientApp chatApp;
    JDialog parentFrame;
    /** Creates new form SettingPanel */
    public SettingPanel(JDialog parentFrame,ChatClientApp chatApp) {
        this.chatApp=chatApp;
        this.parentFrame=parentFrame;
        initComponents();
    }
    public void updateStatusList(String [] statusList,int defaultStatus){
        statusComboBox.setModel(new javax.swing.DefaultComboBoxModel(statusList));
        statusComboBox.setSelectedIndex(defaultStatus-1);
        statusComboBox.validate();
    }
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        serverIPField = new javax.swing.JTextField();
        serverPortField = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        rememberBox = new javax.swing.JCheckBox();
        fontButton = new javax.swing.JButton();
        jLabel5 = new javax.swing.JLabel();
        alertComboBox = new javax.swing.JComboBox();
        jLabel6 = new javax.swing.JLabel();
        changePassButton = new javax.swing.JButton();
        cancelButton = new javax.swing.JButton();
        applyButton = new javax.swing.JButton();
        statusComboBox = new javax.swing.JComboBox();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        onlineCheckBox = new javax.swing.JCheckBox();
        usersCheckBox = new javax.swing.JCheckBox();

        setLayout(null);

        jLabel1.setFont(new java.awt.Font("Tahoma", 1, 11));
        jLabel1.setText("Server Settings");
        add(jLabel1);
        jLabel1.setBounds(10, 10, 130, 14);

        jLabel2.setText("Server IP:");
        add(jLabel2);
        jLabel2.setBounds(20, 30, 70, 14);

        jLabel3.setText("Port:");
        add(jLabel3);
        jLabel3.setBounds(20, 50, 70, 14);
        add(serverIPField);
        serverIPField.setBounds(80, 30, 90, 20);
        add(serverPortField);
        serverPortField.setBounds(80, 50, 90, 20);

        jLabel4.setFont(new java.awt.Font("Tahoma", 1, 11));
        jLabel4.setText("Login Settings:");
        add(jLabel4);
        jLabel4.setBounds(10, 80, 130, 14);

        rememberBox.setText("Remember Password");
        add(rememberBox);
        rememberBox.setBounds(20, 150, 160, 23);

        fontButton.setText("Change Font/Color");
        fontButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                fontButtonActionPerformed(evt);
            }
        });
        add(fontButton);
        fontButton.setBounds(30, 350, 140, 23);

        jLabel5.setFont(new java.awt.Font("Tahoma", 1, 11));
        jLabel5.setText("Alert Settings:");
        add(jLabel5);
        jLabel5.setBounds(10, 210, 130, 14);

        alertComboBox.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "No Sound", "Alert 1", "Alert 2" }));
        add(alertComboBox);
        alertComboBox.setBounds(20, 230, 150, 20);

        jLabel6.setFont(new java.awt.Font("Tahoma", 1, 11));
        jLabel6.setText("Contact List:");
        add(jLabel6);
        jLabel6.setBounds(10, 260, 180, 14);

        changePassButton.setText("Change Password");
        changePassButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                changePassButtonActionPerformed(evt);
            }
        });
        add(changePassButton);
        changePassButton.setBounds(30, 180, 140, 23);

        cancelButton.setText("Cancel");
        cancelButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cancelButtonActionPerformed(evt);
            }
        });
        add(cancelButton);
        cancelButton.setBounds(100, 390, 80, 23);

        applyButton.setText("Apply");
        applyButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                applyButtonActionPerformed(evt);
            }
        });
        add(applyButton);
        applyButton.setBounds(20, 390, 80, 23);

        statusComboBox.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "No Sound", "Alert 1", "Alert 2" }));
        statusComboBox.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                statusComboBoxActionPerformed(evt);
            }
        });
        add(statusComboBox);
        statusComboBox.setBounds(20, 120, 150, 20);

        jLabel7.setText("Default Status:");
        add(jLabel7);
        jLabel7.setBounds(20, 100, 120, 14);

        jLabel8.setFont(new java.awt.Font("Tahoma", 1, 11));
        jLabel8.setText("Color And Fonts Settings:");
        add(jLabel8);
        jLabel8.setBounds(10, 330, 180, 14);

        onlineCheckBox.setText("Show Online Users Only");
        add(onlineCheckBox);
        onlineCheckBox.setBounds(20, 280, 200, 20);

        usersCheckBox.setText("Show Users Only");
        add(usersCheckBox);
        usersCheckBox.setBounds(20, 300, 200, 23);
    }// </editor-fold>//GEN-END:initComponents

    private void cancelButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cancelButtonActionPerformed
        parentFrame.setVisible(false);
    }//GEN-LAST:event_cancelButtonActionPerformed

    private void applyButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_applyButtonActionPerformed
        parentFrame.setVisible(false);
        chatApp.getClientSettingBean().setServerURL(serverIPField.getText());
        chatApp.getClientSettingBean().setServerPort(serverPortField.getText());
        if(rememberBox.isSelected()){
            chatApp.getClientSettingBean().setRememberPass("1");
        }else{
            chatApp.getClientSettingBean().setRememberPass("0");
        }
        if(onlineCheckBox.isSelected()){
            chatApp.getClientSettingBean().setOnlineOnly("1");
        }else{
            chatApp.getClientSettingBean().setOnlineOnly("0");
        }
        if(usersCheckBox.isSelected()){
            chatApp.getClientSettingBean().setUsersOnly("1");
        }else{
            chatApp.getClientSettingBean().setUsersOnly("0");
        }
        chatApp.getClientSettingBean().setSoundType(""+alertComboBox.getSelectedIndex());
        int stauts=statusComboBox.getSelectedIndex()+1;
        chatApp.getClientSettingBean().setDefaultStatus(""+stauts);
        chatApp.getClientSettingBean().updateSettings();
        chatApp.initSound();
        JOptionPane.showMessageDialog(chatApp.getChatClientFrame(),"Settings Applied Successfully!");
    }//GEN-LAST:event_applyButtonActionPerformed

    private void changePassButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_changePassButtonActionPerformed
        chatApp.showChangePass();
    }//GEN-LAST:event_changePassButtonActionPerformed

    private void fontButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_fontButtonActionPerformed
        chatApp.getFontFrame().setLocationRelativeTo(fontButton);
        chatApp.getFontFrame().setVisible(true);
    }//GEN-LAST:event_fontButtonActionPerformed

    private void statusComboBoxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_statusComboBoxActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_statusComboBoxActionPerformed
    public void updateSettings(){
        if("1".equals(chatApp.getClientSettingBean().getRememberPass())){
            rememberBox.setSelected(true);
        }else{
            rememberBox.setSelected(false);
        }
        if("1".equals(chatApp.getClientSettingBean().getOnlineOnly())){
            onlineCheckBox.setSelected(true);
        }else{
            onlineCheckBox.setSelected(false);
        }
        if("1".equals(chatApp.getClientSettingBean().getUsersOnly())){
            usersCheckBox.setSelected(true);
        }else{
            usersCheckBox.setSelected(false);
        }
        serverIPField.setText(chatApp.getClientSettingBean().getServerURL());
        serverPortField.setText(chatApp.getClientSettingBean().getServerPort());
        alertComboBox.setSelectedIndex(Integer.parseInt(chatApp.getClientSettingBean().getSoundType()));
        statusComboBox.setSelectedIndex(Integer.parseInt(chatApp.getClientSettingBean().getDefaultStatus())-1);
        if(chatApp.getUser()==null){
            changePassButton.setEnabled(false);
        }else{
            changePassButton.setEnabled(true);
        }
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JComboBox alertComboBox;
    private javax.swing.JButton applyButton;
    private javax.swing.JButton cancelButton;
    private javax.swing.JButton changePassButton;
    private javax.swing.JButton fontButton;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JCheckBox onlineCheckBox;
    private javax.swing.JCheckBox rememberBox;
    private javax.swing.JTextField serverIPField;
    private javax.swing.JTextField serverPortField;
    private javax.swing.JComboBox statusComboBox;
    private javax.swing.JCheckBox usersCheckBox;
    // End of variables declaration//GEN-END:variables

}

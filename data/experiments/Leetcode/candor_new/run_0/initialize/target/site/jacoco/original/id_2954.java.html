<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>id_2954.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">leetcode</a> &gt; <a href="index.source.html" class="el_package">original</a> &gt; <span class="el_source">id_2954.java</span></div><h1>id_2954.java</h1><pre class="source lang-java linenums">package original;

<span class="fc" id="L3">class Solution2954 {</span>
    private static final int MOD = (int) (1e9 + 7);
    private static final int MX = 100000;
<span class="fc" id="L6">    private static final int[] FAC = new int[MX + 1];</span>

    static {
<span class="fc" id="L9">        FAC[0] = 1;</span>
<span class="fc bfc" id="L10" title="All 2 branches covered.">        for (int i = 1; i &lt;= MX; i++) {</span>
<span class="fc" id="L11">            FAC[i] = (int) ((long) FAC[i - 1] * i % MOD);</span>
        }
<span class="fc" id="L13">    }</span>

    public int numberOfSequence(int n, int[] sick) {
  /**
  You are given an integer n and an array sick sorted in increasing order, representing positions of infected people in a line of n people. At each step, one uninfected person adjacent to an infected person gets infected. This process continues until everyone is infected. An infection sequence is the order in which uninfected people become infected, excluding those initially infected. Return the number of different infection sequences possible, modulo 109+7. &amp;nbsp; Example 1: Input: n = 5, sick = [0,4] Output: 4 Explanation: There is a total of 6 different sequences overall. Valid infection sequences are [1,2,3], [1,3,2], [3,2,1] and [3,1,2]. [2,3,1] and [2,1,3] are not valid infection sequences because the person at index 2 cannot be infected at the first step. Example 2: Input: n = 4, sick = [1] Output: 3 Explanation: There is a total of 6 different sequences overall. Valid infection sequences are [0,2,3], [2,0,3] and [2,3,0]. [3,2,0], [3,0,2], and [0,3,2] are not valid infection sequences because the infection starts at the person at index 1, then the order of infection is 2, then 3, and hence 3 cannot be infected earlier than 2. &amp;nbsp; Constraints: 2 &amp;lt;= n &amp;lt;= 105 1 &amp;lt;= sick.length &amp;lt;= n - 1 0 &amp;lt;= sick[i] &amp;lt;= n - 1 sick is sorted in increasing order.
  */
<span class="fc" id="L19">        int m = sick.length;</span>
<span class="fc" id="L20">        int[] nums = new int[m + 1];</span>
<span class="fc" id="L21">        nums[0] = sick[0];</span>
<span class="fc" id="L22">        nums[m] = n - sick[m - 1] - 1;</span>
<span class="fc bfc" id="L23" title="All 2 branches covered.">        for (int i = 1; i &lt; m; i++) {</span>
<span class="fc" id="L24">            nums[i] = sick[i] - sick[i - 1] - 1;</span>
        }
<span class="fc" id="L26">        int s = 0;</span>
<span class="fc bfc" id="L27" title="All 2 branches covered.">        for (int x : nums) {</span>
<span class="fc" id="L28">            s += x;</span>
        }
<span class="fc" id="L30">        int ans = FAC[s];</span>
<span class="fc bfc" id="L31" title="All 2 branches covered.">        for (int x : nums) {</span>
<span class="pc bpc" id="L32" title="1 of 2 branches missed.">            if (x &gt; 0) {</span>
<span class="fc" id="L33">                ans = (int) ((long) ans * qpow(FAC[x], MOD - 2) % MOD);</span>
            }
        }
<span class="fc bfc" id="L36" title="All 2 branches covered.">        for (int i = 1; i &lt; nums.length - 1; ++i) {</span>
<span class="pc bpc" id="L37" title="1 of 2 branches missed.">            if (nums[i] &gt; 1) {</span>
<span class="fc" id="L38">                ans = (int) ((long) ans * qpow(2, nums[i] - 1) % MOD);</span>
            }
        }
<span class="fc" id="L41">        return ans;</span>
    }

    private int qpow(long a, long n) {
<span class="fc" id="L45">        long ans = 1;</span>
<span class="fc bfc" id="L46" title="All 2 branches covered.">        for (; n &gt; 0; n &gt;&gt;= 1) {</span>
<span class="fc bfc" id="L47" title="All 2 branches covered.">            if ((n &amp; 1) == 1) {</span>
<span class="fc" id="L48">                ans = ans * a % MOD;</span>
            }
<span class="fc" id="L50">            a = a * a % MOD;</span>
        }
<span class="fc" id="L52">        return (int) ans;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>